# Инструкция по автоматизации запуска Docker и выполнения команд при входе в систему Windows 11

Данная инструкция поможет вам настроить автоматический вход в систему, запуск Docker Desktop, выполнение команды docker-compose up из определенной директории и последующую блокировку пользователя.



### 1. Настройка автоматического входа в систему

1. Нажмите клавиши Win + R, чтобы открыть окно "Выполнить".
2. Введите команду netplwiz и нажмите Enter.
3. В открывшемся окне "Учетные записи пользователей" снимите галочку с опции "Требовать ввод имени пользователя и пароля".
4. Нажмите "Применить". Появится окно "Автоматический вход в систему".
5. Введите имя пользователя и пароль, под которым будет выполняться автоматический вход.
6. Нажмите "ОК" для сохранения настроек.

---

### 2. Создание PowerShell-скрипта

1. Откройте Блокнот или любой другой текстовый редактор.
2. Вставьте следующий код, заменив C:\path\to\your\directory на путь к вашей директории:

```
# Запуск Docker Desktop
Start-Process "C:\path\to\Docker Desktop.exe"
   
# Ожидание 30 секунд для загрузки Docker
Start-Sleep -Seconds 30
   
# Переход в нужную директорию (директория с кодом E-aigaq)
Set-Location "C:\path\to\your\directory"
   
# Запуск docker-compose up
docker-compose up
   
# Ожидание 10 секунд перед блокировкой
Start-Sleep -Seconds 10
   
# Блокировка рабочего стола
rundll32.exe user32.dll,LockWorkStation
```

3. Сохраните файл с именем, например, startup_script.ps1, в удобном для вас месте (например, `C:\Scripts\startup_script.ps1`).

---

### 3. Настройка выполнения скрипта при запуске

#### Через Планировщик заданий

1. Нажмите Win + R, введите "taskschd.msc" и нажмите Enter для открытия Планировщика заданий.


2. В правой панели выберите "Создать задачу...".


3. Во вкладке "Общие":
   - Укажите имя задачи, например, StartupScript.
   - Поставьте галочку "Выполнять с наивысшими правами".
   - В поле "Настроить для" выберите "Windows 10, Windows 11".


4. Во вкладке "Триггеры":
   - Нажмите "Создать...".
   - В поле "Начать задачу" выберите "При входе в систему".
   - В разделе "Настроить для" выберите "Любой пользователь" или конкретного пользователя.
   - Нажмите "ОК".


5. Во вкладке "Действия":
   - Нажмите "Создать...".
   - В поле "Действие" выберите "Запуск программы".
   - В поле "Программа или сценарий" введите powershell.
   - В поле "Добавить аргументы (необязательно)" введите:

     ```
     -ExecutionPolicy Bypass -File "C:\Scripts\startup_script.ps1"
     ```

   - Нажмите "ОК".



6. Нажмите "ОК" для сохранения задачи. При сохранении может потребоваться ввести учетные данные администратора.

---

### 4. Разрешение выполнения скриптов PowerShell
1. Откройте PowerShell от имени администратора:
   - Нажмите Win, введите PowerShell.
   - Щелкните правой кнопкой мыши по "Windows PowerShell" и выберите "Запуск от имени администратора".

2. Выполните команду:

```   
Set-ExecutionPolicy RemoteSigned
```   

3. Когда появится запрос на изменение политики, введите Y и нажмите Enter.

---

## Примечания и рекомендации

- Проверка путей: Убедитесь, что пути в скрипте правильные и соответствуют вашей системе.
- Docker Desktop:
  - Убедитесь, что Docker Desktop установлен и работает корректно.
- docker-compose:
  - Если команда docker-compose не распознается, убедитесь, что она добавлена в переменную среды PATH.
  - В противном случае используйте полный путь к docker-compose.exe.

- Тестирование:
  - Перед автоматизацией рекомендуется протестировать скрипт вручную, запустив его в PowerShell, чтобы убедиться, что все работает корректно.

- Безопасность:
  - После выполнения всех настроек убедитесь, что система защищена антивирусным программным обеспечением.
  - Рассмотрите возможность создания точки восстановления системы перед внесением изменений.

---
